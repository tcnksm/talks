ãƒ†ã‚¹ãƒˆã—ã‚„ã™ã„Golangã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã
golang.tokyo #2
12 Dec 2016

Taichi Nakashima
@deeeet

* è¨€ã„ãŸã„ã“ã¨

ä¾å­˜ã‚’æ˜ç¢ºã«ã›ã‚ˆï¼

* whoami

.image img/deeeet.png 200 _

- *@deeeet* / *@tcnksm* (GitHub)
- [[deeeet.com][http://deeeet.com]]
- A PaaS Dev&Ops

* OSS

Tools

- [[https://github.com/tcnksm/gcli][gcli]] - The easy way to build Golang command-line application
- [[https://github.com/tcnksm/ghr][ghr]] - Create Github Release and upload artifacts in parallel

Packages

- [[https://github.com/tcnksm/go-httpstat][go-httpstat]] - Go package for tracing golang HTTP request latency
- [[https://github.com/tcnksm/go-input][go-input]] - Go package for ideal tty prompt
- [[https://github.com/tcnksm/go-latest][go-latest]] - Simple way to check version is latest or not from various sources in Go

* Publications

.image img/minnanoGo.jpg 500 _

.caption [[https://www.amazon.co.jp/dp/477418392X][ã¿ã‚“ãªã®Goè¨€èª]]

* Testable Golang Design

* ãƒ†ã‚¹ãƒˆã¨ã¯ä½•ã‹?

* ãƒ†ã‚¹ãƒˆã¨ã¯ä½•ã‹?

å…¥åŠ›ã«å¯¾ã—ã¦æœŸå¾…ã™ã‚‹å‡ºåŠ›ãŒå¾—ã‚‰ã‚Œã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹ã“ã¨

* ãƒ†ã‚¹ãƒˆã§ããªã„?

1. ã‚³ãƒ¼ãƒ‰ãŒè¤‡é›‘ã§æ–°ã—ã„æ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹ã®ãŒé›£ã—ã„
2. ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã—ã¦è¦‹é€šã—ã®è‰¯ã„ã‚³ãƒ¼ãƒ‰ã«ã—ã‚ˆã†
3. ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã®ãŸã‚ã«ã¯ãƒ†ã‚¹ãƒˆãŒå¿…è¦ã 
4. ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã®ãŒé›£ã—ã„...
5. ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã§ããªã„...
6. é£²ã¿ã«è¡Œã“ã†ğŸ»

* ãªãœãƒ†ã‚¹ãƒˆãŒé›£ã—ããªã£ã¦ã—ã¾ã†ã®ã‹?

- é–¢æ•°ã«å¯¾ã™ã‚‹ã€Œå…¥åŠ›ã€ãŒã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã—ãã‚Œã¦ã„ãªã„
- é–¢æ•°ã®ã€Œå‡ºåŠ›ã€ã‚„ã€Œå¤–ç•Œã¸ã®å½±éŸ¿ï¼ˆå‰¯ä½œç”¨ï¼‰ã€ã‚’å–ã‚Šå‡ºã›ãªã„
- é–¢æ•°ã®ä¾å­˜ã‚’æŠ½è±¡åŒ–ã§ãã¦ã„ãªã„

* ãƒ†ã‚¹ãƒˆã§ããªã„ã‚³ãƒ¼ãƒ‰ã¯ãªã„

- å•é¡Œã¯ãƒ†ã‚¹ãƒˆã§ããªã„è¨­è¨ˆã‚„ãƒ‡ã‚¶ã‚¤ãƒ³ã§ã‚ã‚‹
- è‰¯ã„ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã“ã¨ã¯è‰¯ã„ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã“ã¨ã¨åŒã˜ã§ã‚ã‚‹

* Unitãƒ†ã‚¹ãƒˆãŒå¤§åˆ‡

.image img/pyramid.png 300 _

.caption [[https://testing.googleblog.com/2015/04/just-say-no-to-more-end-to-end-tests.html][Just Say No to More End-to-End Tests]]

- Unitãƒ†ã‚¹ãƒˆã¯é€Ÿã„
- Unitãƒ†ã‚¹ãƒˆã¯ä¿¡é ¼ã§ãã‚‹
- Unitãƒ†ã‚¹ãƒˆã¯å•é¡Œã‚’åˆ†é›¢ã§ãã‚‹

* Unitãƒ†ã‚¹ãƒˆãŒå¤§åˆ‡

- ã‚·ãƒ³ãƒ—ãƒ«ãªUnitãƒ†ã‚¹ãƒˆã‚’ã—ã£ã‹ã‚Šæ›¸ã/ç©ã¿ä¸Šã’ã‚‹ã“ã¨ãŒå¤§åˆ‡ã§ã‚ã‚‹
- ã€ŒåŸºæœ¬çš„ã§ï¼Œæ˜ã‚‰ã‹ã«æ­£ã—ã„é–¢æ•°ã‚’çµ„ã¿åˆã‚ã›ã¦ï¼Œã‚ˆã‚Šå¤§ããªé–¢æ•°ã‚’çµ„ã¿ç«‹ã¦ã‚‹ã€ï¼ˆã€Œã™ã”ã„Haskellæ¥½ã—ãå­¦ã¼ã†ã€ï¼‰

* ä»Šæ—¥ã®è©±

ä½•ã«æ°—ã‚’ã¤ã‘ã‚Œã°TestableãªGolangã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã‘ã‚‹ã‹ï¼ˆGolangã§è‰¯ã„Unitãƒ†ã‚¹ãƒˆã‚’æ›¸ãã«ã¯ã©ã†ã™ã‚‹ã‹ï¼‰

* çµ¶å¯¾ã«è¦³ã¦ã»ã—ã„ï¼

- [[https://speakerdeck.com/mitchellh/advanced-testing-with-go][Advanced Testing with Go]] by @mitchellh
- [[https://peter.bourgon.org/go-best-practices-2016/][Go best practices, six years in]] by @peterbourgon

* å‰æ

`testing`ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ååˆ†ã§ã‚ã‚‹ï¼ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯ä½¿ã‚ãªã„ï¼

ãƒ†ã‚¹ãƒˆã®ãŸã‚ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ã†ã“ã¨ã¯æ–°ãŸãªMini languageï¼ˆDSLï¼‰ã‚’å°å…¥ã™ã‚‹ã“ã¨ã¨å¤‰ã‚ã‚‰ãªã„ï¼æœ€åˆã«ãã‚Œã‚’æ›¸ãäººã¯æ¥½ã«ãªã‚‹ã‹ã‚‚ã—ã‚Œãªã„ãŒæ–°ã—ããƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å‚å…¥ã—ã¦ããŸã²ã¨ã«ã¯ã‚³ã‚¹ãƒˆã«ã—ã‹ãªã‚‰ãªã„ï¼ˆGolangä»¥å¤–ã‚‚å­¦ã¶å¿…è¦ãŒã‚ã‚‹ï¼‰

[[https://golang.org/doc/faq#Packages_Testing][Where is my favorite helper function for testing?]]

